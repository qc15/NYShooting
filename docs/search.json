[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Exploratory Data Analysis of Incident Level Shooting Data in New York City",
    "section": "",
    "text": "1 Introduction\nGun violence remains a pressing issue in many urban areas, especially for an international city such as New York. It is crucial to note that gun violence is not only a public safety concern but also a reflection of broader societal challenges, such as inequality and access to resources. Through this study, we hope to contribute to the ongoing discourse on improving community safety and equity.\nBy analyzing the NYPD Shooting Incident Data (Historic), we aim to understand the patterns and factors contributing to these incidents, offering insights that may aid in developing preventative measures,or enhance the security for specific region with high shooting incident rate. This dataset provides detailed information on the location, time, and demographic profiles of victims and perpetrators, making it a valuable resource for exploring the insight of these incidents.\nWe will explore the data through the researches listed below: 1,Crime Rate Differences by Region: Investigate the variations in crime rates across different boroughs and neighborhoods in New York City to identify regional disparities and potential influencing factors.\n2,Crime Rate Differences by Location Classification: To be more specific, investigate the variations in crime rates across different locations. Combining with the formal research, exploring the furthur relationship between shooting crime and Region+Location.\n3,Temporal Patterns of Crime: Analyze the distribution of crimes over time, focusing on seasonal, monthly, or daily trends, to identify peak periods and understand temporal variations in gun violence incidents.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Description\nFor this project, we take advantage of a dataset recording each shooting incident in NYC from 2006 to 2023. The data is collected quarterly by New York Police Department (NYPD) and reviewed by the Office of Management Analysis and Planning before being published on the NYPD website. This dataset is updated annually. It contains 28562 rows and 21 columns, with each row representing a single shooting incident. The 21 columns provide detailed information about each incident, such as the location, time, and details about the suspect and victim. This dataset is available in multiple formats, including CSV, XML, etc. For this project, we imported the data by downloading it in CSV format from the website “https://data.cityofnewyork.us/Public-Safety/NYPD-Shooting-Incident-Data-Historic-/833y-fsy8/about_data”.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis\n\n\nCode\nlibrary(DataExplorer)\ndf = read.csv(\"data/raw/NYPD_Shooting_Incident_Data.csv\")\ndf[df == \"\"] &lt;- NA\nplot_missing(df, title = \"Distribution of Missing Values for Each Variable\")\n\n\n\n\n\n\n\n\n\nFrom the plot “Distribution of Missing Values for Each Variable”, we can see that 16 columns contain either no missing values or very small number of missing values. Each of the columns PERP_RACE, PERP_SEX, and PERP_AGE_GROUP contains about 32.5% missing values. These columns record information about perpetrators. About a half of values are missing in LOCATION_DESC, which records the location of the shooting incident. Finally, the columns LOC_CLASSFCTN_DESC and LOC_OF_OCCUR_DESC both contain 89.62% missing values. LOC_CLASSFCTN_DESC is a column showing whether the incident is outdoor or indoor. LOC_CLASSFCTN_DESC is a column showing whether the kind of location of the shooting incident (e.g. commercial, street, housing, vehicle, etc.)\n\n\nCode\nlibrary(naniar)\nlibrary(patchwork)\n# https://www.rdocumentation.org/packages/naniar/versions/1.1.0/topics/gg_miss_upset\ngg_miss_upset(df, nsets = 10)\n\n\n\n\n\n\n\n\n\nThe plot above shows the intersection of missing values among multiple variables. It shows that all of the missing values in the columns LOC_OF_OCCUR_DESC and LOC_CLASSFCTN_DESC appear together (the number of missing values in these two columns: \\(28562 \\times 0.8962 \\approx 25597\\) and the sum of the frequencies of the bins except the 5th bin above is 25596). Except the 59 intersection of missing values in the columns “Latitude, Longitude, and Lon_Lat”, all intersections include these two columns.\nIn addition, it shows that all of the missing values in the three columns Latitude, Longitude, and Lon_Lat appear at the same time (i.e. one column has a missing value only when other two columns also have missing values) since the plot “Distribution of Missing Values for Each Variable” shows each of them has only \\(28562 \\times 0.21\\% \\approx 59\\) missing values.\nSimilarly, all of the missing values in the columns PERP_SEX and PERP_RACE appear at the same time. This is because the plot “Distribution of Missing Values for Each Variable” shows each of them has only \\(28562 \\times 0.326 \\approx 9311\\) and the sum of the frequency of the third column and the fourth column is 9310. Notice that if these two columns’ missing values appear, the value of the column PERP_AGE_GROUP is also missing, but not the other way around (PERP_AGE_GROUP has around 1285 additional missing values that only accompany with the missing values of the columns LOC_OF_OCCUR_DESC and LOC_CLASSFCTN_DESC).",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Results",
    "section": "",
    "text": "Code\nlibrary(tidyr)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(lubridate) \nlibrary(vcd)\ndf = read.csv(\"data/raw/NYPD_Shooting_Incident_Data.csv\")\ndf$OCCUR_DATE &lt;- as.Date(df$OCCUR_DATE, format = \"%m/%d/%Y\")\n\n\n#(1) Line Plot: Number of Incidents over Years At first glance at the dataset, we can see that New York City is divided into five different boroughs:Brooklyn, Bronx, Manhattan, Queens, and Staten Island. To investigate the relationship between safety levels across these areas, we began by using a line plot to visualize and compare the number of shooting incidents in each borough.\n\n\nCode\ncrime_data &lt;- df |&gt;\n  mutate(YearMonth = format(as.Date(OCCUR_DATE), \"%Y-%m\")) |&gt;\n  group_by(YearMonth, BORO) |&gt;\n  summarise(IncidentCount = n(), .groups = \"drop\") |&gt;\n  ungroup()\n\n\n\n\nCode\ncrime_data &lt;- df |&gt;\n  mutate(YearMonth = format(as.Date(OCCUR_DATE, \"%m/%d/%Y\"), \"%Y-%m\"))\n\nall_combinations &lt;- crime_data |&gt;\n  distinct(YearMonth, BORO) |&gt;\n  complete(YearMonth, BORO, fill = list(IncidentCount = 0))\n\ncrime_data_complete &lt;- crime_data |&gt;\n  group_by(YearMonth, BORO) |&gt;\n  summarise(IncidentCount = n(), .groups = \"drop\") |&gt;\n  right_join(all_combinations, by = c(\"YearMonth\", \"BORO\")) |&gt;\n  replace_na(list(IncidentCount = 0)) |&gt;\n  mutate(YearMonth = as.Date(paste0(YearMonth, \"-01\"), format = \"%Y-%m-%d\")) |&gt;\n  arrange(YearMonth)\n\n\n\n\nCode\n# Reorder BORO based on the observed rank\ncrime_data_complete$BORO &lt;- factor(\n  crime_data_complete$BORO,\n  levels = c(\"BROOKLYN\", \"BRONX\", \"QUEENS\", \"MANHATTAN\", \"STATEN ISLAND\")\n)\n\nggplot(crime_data_complete, aes(x = YearMonth, y = IncidentCount, color = BORO, group = BORO)) +\n  geom_line(linewidth = 1) +  \n  labs(title = \"Number of Incidents Over Time by Borough\",\n       x = \"Year-Month\", y = \"Number of Incidents\", color = \"Borough\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\n\n\n\n\nFrom the plot above, we found that Brooklyn almost always has the highest number of incidents in each month and Bronx almost has the second-highest number of incidents in each month. These two boroughs also have the most unstable number of incidents in each month. Queens and Manhattan contain similar number of incidents in each month. The number of incidents in Staten Island is smallest among all boroughs, maybe because of its petite area.\nIt is also noticeable that the number of incidents in each borough decreases to one level in 2013-2016 (especially for Brooklyn and Bronx) and decreases to another level in 2017-2019, but there exists a sharp increase in 2020, which is probably due to the pandemic and the police brutality protests in the wake of George Floyd’s murder. The number of incidents in Brooklyn and Bronx, after 2020, returns back to a level similar to the level in 2013-2016, while it didn’t decrease until 2023 in Queens and Manhattan.\nFrom the plot above, we find that there might exist a cyclic pattern in boroughs other than Staten Island, where each year is a cycle. To give a closer look at it, we facet this plot by year.\n#(2)Line Plot: Cyclic pattern of shooting incident over year\n\n\nCode\ncrime_data_complete &lt;- crime_data_complete |&gt;\n  mutate(Year = format(as.Date(paste0(YearMonth, \"-01\"), \"%Y-%m-%d\"), \"%Y\"))  # Extract year\n\nggplot(crime_data_complete, aes(x = YearMonth, y = IncidentCount, color = BORO, group = BORO)) +\n  geom_line(size = 1) +  \n  labs(\n    title = \"Number of Incidents Over Each Year by Borough\",\n    x = \"Year-Month\", y = \"Number of Incidents\", color = \"Borough\"\n  ) +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  facet_wrap(~ Year, scales = \"free_x\")  \n\n\n\n\n\n\n\n\n\nThe plot above shows the number of shooting incidents over each year in each borough. From the plot, we can see that the cyclic pattern is not very strong. However, it shows that the number of shooting incidents in summer is larger than the number of shooting in other months, especially for Brooklyn and Bronx.\n\n\nCode\nbrooklyn_data &lt;- crime_data_complete |&gt;\n  filter(BORO == \"BROOKLYN\") |&gt;\n  mutate(\n    Month = factor(format(YearMonth, \"%B\"), \n                   levels = month.name)\n  )\n\nggplot(brooklyn_data, aes(\n  x = as.numeric(format(YearMonth, \"%Y\")), \n  y = IncidentCount, \n  color = Month, \n  group = Month\n)) +\n  geom_line(size = 1) +\n  labs(\n    title = \"Brooklyn Incident Numbers by Month\",\n    x = \"Year\", \n    y = \"Incident Count\", \n    color = \"Month\"\n  ) +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  scale_color_viridis_d(option = \"plasma\", begin = 0, end = 1)\n\n\n\n\n\n\n\n\n\nThis line chart illustrates the monthly distribution of shooting incidents over time. A notable observation is the sharp spike in incidents during July of 2020, significantly exceeding counts in any other month or year. This anomaly may reflect specific societal or environmental factors, such as social unrest or the COVID-19 pandemic’s impact during that period. Generally, the chart reveals a seasonal pattern where summer months (June to August) tend to have higher incident counts compared to colder months, such as January and February. Over the years, there is an overall declining trend in incident counts across most months, indicating potential improvements in public safety or effective interventions. However, periodic fluctuations highlight the persistent need for targeted measures during high-risk months, especially in the summer.\nAfter studying the cyclic pattern of incidents by month, we decided to conduct a more detailed analysis by examining the high-occurrence time periods of shooting incidents within a single day. The insights gained from this data can help in better planning and managing the city.\n#(3)Histogram: OCCUR TIME (0-2, 2-4, …, 22-24)\n\n\nCode\ndf$OCCUR_HOUR &lt;- as.numeric(sub(\":.*\", \"\", df$OCCUR_TIME))\n\ntime_hist_data &lt;- df |&gt;\n  mutate(TIME_BIN = cut(OCCUR_HOUR, breaks = seq(0, 24, by = 2), right = FALSE, include.lowest = TRUE)) |&gt;\n  group_by(TIME_BIN) |&gt;\n  summarise(Frequency = n()) |&gt;\n  mutate(Percentage = Frequency / sum(Frequency) * 100)\n\n\n\n\nCode\nggplot(time_hist_data, aes(x = TIME_BIN, y = Percentage)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\", color = \"black\", alpha = 1) +\n  labs(title = \"Histogram of Occur Time\", \n       x = \"Time Interval (Hours)\", \n       y = \"Percentage (%)\") +\n  scale_y_continuous(labels = scales::percent_format(scale = 1)) +\n  theme_grey()\n\n\n\n\n\n\n\n\n\n\n\nCode\ndf$TIME_BIN &lt;- cut(df$OCCUR_HOUR, breaks = seq(0, 24, by = 2), right = FALSE, include.lowest = TRUE)\n\nggplot(df, aes(x = TIME_BIN, fill = BORO)) +\n  geom_bar(alpha = 1, color = \"black\") +\n  labs(title = \"Histogram of Occur Time by Region\", \n       x = \"Time Interval (Hours)\", \n       y = \"Frequency\") +\n  facet_wrap(~ BORO, ncol = 3) +\n  theme_grey() + \n  theme(axis.text.x = element_text(size=8,angle=45, hjust = 1))  \n\n\n\n\n\n\n\n\n\nFrom the histogram above, we can observe that over 50% of shooting incidents occur between 8 PM and 4 AM, with the peak happening between 10 PM and 2 AM. This pattern is consistent across all regions, even in Staten Island, which has the lowest population. This aligns with the operational dynamics of most cities, especially in a place like New York, which does not enforce a curfew. Many shops and restaurants remain open even during the early hours of the morning, resulting in a nighttime traffic flow that is not significantly lower than during the day. However, reduced police presence at night, particularly around subway stations, leads to a higher number of shooting incidents that go unchecked. Conversely, we can see that 6 AM to 10 AM is the time period with the fewest shooting incidents. On the one hand, most people are at home resting during these hours; on the other hand, the city begins its new day of operations, and workers come out to maintain order. Therefore, it is not surprising that shooting incidents drop significantly during this time.\nAfter a basic analysis of the occurrence time of shooting incidents, we decided to use a heatmap to observe the relationship between the number of incidents, locations, and time.\n#(4)Heatmap: OCCUR_TIME and Region (BORO)\n\n\nCode\ncrime_data_time_boro &lt;- crime_data |&gt;\n  mutate(\n    OCCUR_TIME = hms::as_hms(OCCUR_TIME),\n    TimePeriod = floor(hour(OCCUR_TIME) / 2) * 2\n  ) |&gt;\n  group_by(BORO, TimePeriod) |&gt;\n  summarise(IncidentCount = n(), .groups = \"drop\") |&gt;\n  mutate(BORO = factor(BORO, levels = c(\"BROOKLYN\", \"BRONX\", \"QUEENS\", \"MANHATTAN\", \"STATEN ISLAND\")))\n\nggplot(crime_data_time_boro, aes(x = TimePeriod, y = BORO, fill = IncidentCount)) +\n  geom_tile() +\n  scale_x_continuous(breaks = seq(0, 22, by = 2), labels = paste0(seq(0, 22, by = 2), \"-\", seq(2, 24, by = 2))) +\n  scale_fill_gradient(low = \"white\", high = \"red\") +\n  labs(title = \"Heatmap of Incidents by Time and Borough\",\n       x = \"Time Period (2-hour intervals)\", y = \"Borough\", fill = \"Incident Count\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\n\n\n\n\nThis heatmap reveals an even more significant patterns in the distribution of shooting incidents across different boroughs and time periods than the histogram showned above. The data indicates that shooting incidents are most frequent during late-night hours, specifically between midnight and 2 AM (0-2) and 10 PM to midnight (22-24), with these periods showing the darkest colors, representing the highest incident counts. Brooklyn and the Bronx stand out as the boroughs with the highest frequency of incidents, particularly during these high-risk time frames. In contrast, Queens and Manhattan exhibit comparatively lower incident counts, while Staten Island emerges as the safest borough with minimal occurrences throughout the day. Additionally, there is a noticeable dip in shooting incidents during daytime hours, from 6 AM to 4 PM (6-16), likely reflecting increased societal activity and stronger oversight during these times. This analysis underscores the interaction between time and location, highlighting specific areas and periods that may require targeted safety interventions.\nWhen studying cyclic patterns, the day-of-week effect is also crucial, as it highlights which days of the week warrant attention and caution. Therefore, we decided to use a line plot to create a weekly plot for a specific year, with the aid of a smooth line to more intuitively observe the probability and trends of incidents occurring on each day.\n\n4 (5)Line plot: Incident in one year for day-of-week effect\nBased on the Line Plot: Number of Incidents per Year/Month, we observe that the number of shooting incidents during this year is particularly high, likely due to the impact of the pandemic. Therefore, we selected this year as a comprehensive sample to analyze the day-of-week effect.\n\n\nCode\ndf$OCCUR_DATE &lt;- as.Date(df$OCCUR_DATE, format = \"%m/%d/%Y\")\ndf &lt;- df |&gt;\n  mutate(\n    Day_of_Week = wday(OCCUR_DATE, label = TRUE, week_start = 1), \n    Month = month(OCCUR_DATE, label = TRUE),                     \n    Year = year(OCCUR_DATE)                                      \n  )\n\ndf_2020 &lt;- df |&gt; filter(Year == 2020)\n\ndaily_counts &lt;- df_2020 |&gt;\n  group_by(OCCUR_DATE, Day_of_Week) |&gt;\n  summarise(Incident_Count = n(), .groups = \"drop\")\n\nggplot(daily_counts, aes(x = OCCUR_DATE, y = Incident_Count, group = Day_of_Week)) +\n  geom_line(color = \"black\", size = 0.7) +\n  facet_wrap(~ Day_of_Week, ncol = 3) +\n  labs(\n    title = \"Daily Shooting Incidents in 2020 by Day of Week\",\n    x = \"Date\",\n    y = \"Number of Incidents\"\n  ) +\n  theme_grey()+\n  theme(axis.text.x = element_text(size=5,angle=45, hjust = 1))\n\n\n\n\n\n\n\n\n\n\n\nCode\nggplot(daily_counts, aes(x = OCCUR_DATE, y = Incident_Count, group = Day_of_Week)) +\n  geom_line(color = \"black\", size = 0.7) +\n  geom_smooth(se = FALSE, color = \"blue\", size = 1) +\n  facet_wrap(~ Day_of_Week, ncol = 7) +\n  labs(\n    title = \"Daily Shooting Incidents in 2020 by Day of Week (With Smoother)\",\n    x = \"Date\",\n    y = \"Number of Incidents\"\n  ) +\n  theme_grey()+\n  theme(axis.text.x = element_text(size=5, hjust = 1))\n\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\nWith the help of the smoother, we can observe that shooting incidents are generally higher on weekends compared to weekdays, especially on Sundays. This aligns with common sense, as most people work during the weekdays, while weekends are typically reserved for relaxation or social gatherings. This may cause people staying out later at night, which, as seen in our Histogram: OCCUR_TIME (0-2, 2-4, …, 22-24), is when incidents are more likely to occur, matching this pattern.\nNext, we shift our focus to the incidents themselves. By analyzing the number of crimes committed across different age groups, we can better understand which groups are more prone to committing crimes, allowing us to implement more effective management and guidance, particularly for younger individuals. We will use a Cleveland dot plot for this analysis.\n#(6)Faceted Cleveland dot plot: Number of victims each year, faceted by VIC_AGE_GROUP\n\n\nCode\ndf &lt;- df |&gt;\n  mutate(VIC_AGE_GROUP = case_when(\n    VIC_AGE_GROUP %in% c(\"&lt;18\", \"18-24\", \"25-44\", \"45-64\", \"65+\", \"UNKNOWN\") ~ VIC_AGE_GROUP,\n    TRUE ~ \"UNKNOWN\"\n  ))\n\n\n\n\nCode\ndf_cleaned &lt;- df |&gt;\n  mutate(VIC_AGE_GROUP = case_when(\n    VIC_AGE_GROUP %in% c(\"&lt;18\", \"18-24\", \"25-44\", \"45-64\", \"65+\") ~ VIC_AGE_GROUP,\n    TRUE ~ NA_character_  \n  )) |&gt;\n  filter(!is.na(VIC_AGE_GROUP)) \n\nprocessed_data &lt;- df_cleaned |&gt;\n  mutate(OCCUR_YEAR = year(as.Date(OCCUR_DATE, format = \"%m/%d/%Y\"))) |&gt;\n  group_by(OCCUR_YEAR, VIC_AGE_GROUP) |&gt;\n  summarise(Victim_Count = n(), .groups = \"drop\")\n\nggplot(processed_data, aes(x = Victim_Count, y = factor(OCCUR_YEAR), color = VIC_AGE_GROUP)) +\n  geom_point(size = 3) +\n  labs(\n    title = \"Number of Victims Each Year by Age Group\",\n    x = \"Number of Victims\",\n    y = \"Year\",\n    color = \"Age Group\"\n  ) +\n  theme_minimal() +\n  theme(strip.text = element_text(size = 12))\n\n\n\n\n\n\n\n\n\nFrom this Cleveland bar chart, it is evident that shooting victims of different age groups exhibit distinct trends over the years. Firstly, the 25-44 age group accounts for the highest number of victims, likely because this group is more actively involved in social and professional activities, increasing their exposure to potential risks. Secondly, the 18-24 age group shows a significant rise in victim numbers in certain years (e.g., 2018 to 2020), suggesting a stronger correlation with increasing high-risk activities such as gang conflicts or criminal behavior. The 65+ age group has the fewest victims, possibly due to reduced social activity and lower exposure to danger. Although the number of victims under 18 is relatively small, it remains a concern, highlighting the need for measures to prevent their involvement in violent incidents. Overall, in certain years such as 2020, the number of victims across various age groups increased significantly, potentially linked to external factors like social unrest, economic stress, and covid virus. This analysis underscores the importance of enhancing public safety measures and implementing targeted interventions, particularly for age groups with higher victim counts.\nIt’s not just about age; we need more information about the victims to better protect specific age groups and certain communities from harm. Therefore, we use a Cleveland dot plot again to study the impact of gender and race on victims.\n\n\n5 (7)Cleveland dot plot: VIC_SEX\n\n\nCode\ncrime_data &lt;- crime_data |&gt;\n  mutate(YearMonth = as.Date(paste0(YearMonth, \"-01\"), format = \"%Y-%m-%d\")) |&gt;\n  mutate(YEAR = year(YearMonth))\n\ndata_summary &lt;- crime_data |&gt;\n  group_by(YEAR, VIC_SEX) |&gt;\n  summarise(Count = n(), .groups = 'drop')\n\nggplot(data_summary, aes(x = Count, y = as.factor(YEAR), color = VIC_SEX)) +\n  geom_point(size = 3) +  # Add points for each sex\n  labs(title = \"Cleveland Dot Plot of Victim Sex by Year\",\n       x = \"Incident Count\", y = \"Year\", color = \"Victim Sex\") +\n  theme_minimal() +\n  theme(axis.text.y = element_text(angle = 45, hjust = 1)) +\n  scale_color_manual(values = c(\"blue\", \"red\", \"grey\"),labels = c(\"Female\", \"Male\", \"Unknown\"))\n\n\n\n\n\n\n\n\n\n\n\nCode\ndata_summary &lt;- crime_data |&gt;\n  group_by(YEAR, VIC_SEX, VIC_RACE) |&gt;\n  summarise(Count = n(), .groups = 'drop')\n\nggplot(data_summary, aes(x = Count, y = as.factor(YEAR), color = VIC_SEX)) +\n  geom_point(size = 3) +  # Add points for each sex\n  labs(title = \"Cleveland Dot Plot of Victim Sex by Year (Faceted by Race)\",\n       x = \"Incident Count\", y = \"Year\", color = \"Victim Sex\") +\n  theme_minimal() +\n  theme(axis.text.y = element_text(angle = 45, hjust = 1)) +\n  scale_color_manual(\n    values = c(\"pink\", \"blue\", \"gray\"),\n    labels = c(\"Female\", \"Male\", \"Unknown\")\n  ) +\n  facet_wrap(~ VIC_RACE, scales = \"free\")\n\n\n\n\n\n\n\n\n\nThe plot above shows that for all races, the number of male victims is almost always larger than the number of female victims in each year. The number of female victims in each year is relatively stable compared to the number of male victims for all races. We also noticed that Black, White Hispanic, and Black Hispanic are races that have the top 3 number of victims in each year.This data urges us to better protect individuals of these races.\nLast but not least,We still need to study the relationships between victims and perpetrators, such as which age groups are more likely to experience conflicts that escalate into shooting incidents. With this research, we can implement more control measures in venues frequently visited by specific age groups (e.g., bars and nightclubs commonly frequented by young adults aged 25-44) to suppress the occurrence of shooting incidents.\n#(8)Heatmap: PERP_AGE_GROUP, VIC_AGE_GROUP\n\n\nCode\ndf_clean_age &lt;- df |&gt;\n  filter(VIC_AGE_GROUP != \"1022\", PERP_AGE_GROUP != \"1020\", PERP_AGE_GROUP != \"(null)\", PERP_AGE_GROUP != \"\", PERP_AGE_GROUP != \"940\", PERP_AGE_GROUP != \"224\", PERP_AGE_GROUP != \"1028\", VIC_AGE_GROUP!=\"UNKNOWN\",PERP_AGE_GROUP!=\"UNKNOWN\")\n\nage_table &lt;- table(df_clean_age$PERP_AGE_GROUP, df_clean_age$VIC_AGE_GROUP)\n\nage_table_long &lt;- as.data.frame(as.table(age_table))\n\ncolnames(age_table_long) &lt;- c(\"PERP_AGE_GROUP\", \"VIC_AGE_GROUP\", \"Count\")\n\nggplot(age_table_long, aes(x = PERP_AGE_GROUP, y = VIC_AGE_GROUP, fill = Count)) +\n  geom_tile(color = \"white\") +  # Add white borders around tiles\n  scale_fill_distiller(palette = \"Blues\", direction = 1) +\n  labs(\n    title = \"Heatmap of Perpetrator and Victim Age Groups\",\n    x = \"Perpetrator Age Group\",\n    y = \"Victim Age Group\",\n    fill = \"Count\"\n  ) +\n  theme_minimal() +\n  theme(\n    axis.text.x = element_text(angle = 45, hjust = 1)  # Rotate x-axis labels for readability\n  )\n\n\n\n\n\n\n\n\n\nThe heatmap above shows the heatmap of age groups of perpetrators and victims. From the plot, we can see that the victims in 18-24 and 25-44 are much more than victims in other age groups. Other than perpetrators over 65 years old, almost perpetrators in every age group are more likely to shoot victims who are between 18-44 years old. In addition, we find that the perpetrators in 18-24 years old are more likely to shoot vitims who are 18-24 years old instead of victims who are 25-44 years old, while the perpetrators in 25-44 years old are more likely to shoot victims who are 25-44 years old instead of victims who are 18-24 years old. This is reasonable because individuals in similar age groups are more likely to interact within the same social environments.\n#Location for d3\n\n\nCode\nfiltered_data &lt;- crime_data |&gt;\n  filter(\n    BORO == \"BROOKLYN\",                              # Only data from Brooklyn\n    format(OCCUR_DATE, \"%Y-%m\") == \"2020-07\"\n  ) |&gt;\n  select(OCCUR_DATE, BORO, Latitude, Longitude)\n\n\n\n\nCode\noutput_text &lt;- filtered_data |&gt;\n  mutate(\n    text = paste0(\"{ latitude: \", Latitude, \n                  \", longitude: \", Longitude, \n                  \", date: '\", OCCUR_DATE, \"' }\")\n  ) |&gt;\n  pull(text) |&gt; # Extract as a vector of text strings\n  paste(collapse = \",\\n  \") # Combine into a single string with line breaks\n\n# Add brackets to wrap the final output\noutput_text &lt;- paste0(\"[\\n  \", output_text, \"\\n]\")\n\n# Print the result\ncat(output_text)\n\n\n\n\nCode\ndate_counts &lt;- filtered_data |&gt;\n  group_by(OCCUR_DATE) |&gt;\n  summarize(Count = n())\n\n\n\n\nCode\nmin_values &lt;- apply(filtered_data, 2, min)\nmax_values &lt;- apply(filtered_data, 2, max)\n\nprint(min_values)\nprint(max_values)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "d3graph.html",
    "href": "d3graph.html",
    "title": "4  Interactive graph",
    "section": "",
    "text": "Interactive plot: Daily Locations of Shooting Incidents in July 2020 in Brooklyn\n\n\n\n\n\nNext Day\n\n\nPrevious Day",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Interactive graph</span>"
    ]
  }
]